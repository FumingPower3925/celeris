File: bench-rampup
Type: cpu
Time: 2025-10-15 12:14:35 CEST
Duration: 15.57s, Total samples = 70.63s (453.61%)
Showing nodes accounting for 64.20s, 90.90% of 70.63s total
Dropped 509 nodes (cum <= 0.35s)
      flat  flat%   sum%        cum   cum%
    24.78s 35.08% 35.08%     24.80s 35.11%  syscall.syscall
     7.08s 10.02% 45.11%      7.08s 10.02%  runtime.(*mspan).heapBitsSmallForAddr
     6.40s  9.06% 54.17%      6.40s  9.06%  runtime.kevent
     4.94s  6.99% 61.16%      4.94s  6.99%  runtime.usleep
     4.27s  6.05% 67.21%      4.27s  6.05%  runtime.memclrNoHeapPointers
     3.18s  4.50% 71.71%      3.18s  4.50%  runtime.madvise
     2.97s  4.21% 75.92%      3.52s  4.98%  runtime.findObject
     2.37s  3.36% 79.27%      2.38s  3.37%  syscall.syscall6
     1.61s  2.28% 81.55%     14.90s 21.10%  runtime.scanobject
     1.53s  2.17% 83.72%      1.53s  2.17%  runtime.pthread_cond_wait
     1.52s  2.15% 85.87%      2.17s  3.07%  runtime.greyobject
     0.78s  1.10% 86.97%      0.78s  1.10%  runtime.pthread_cond_signal
     0.45s  0.64% 87.61%     15.73s 22.27%  runtime.gcDrain
     0.43s  0.61% 88.22%      0.43s  0.61%  runtime.(*gcWork).tryGetObjFast (inline)
     0.25s  0.35% 88.57%      7.34s 10.39%  runtime.(*mspan).typePointersOfUnchecked
     0.13s  0.18% 88.76%      4.15s  5.88%  runtime.mallocgcSmallScanNoHeader
     0.13s  0.18% 88.94%      0.99s  1.40%  runtime.selectgo
     0.12s  0.17% 89.11%      7.05s  9.98%  runtime.mallocgc
     0.09s  0.13% 89.24%      3.07s  4.35%  runtime.stealWork
     0.07s 0.099% 89.34%      0.54s  0.76%  internal/sync.(*Mutex).Lock (inline)
     0.07s 0.099% 89.44%      2.75s  3.89%  runtime.runqgrab
     0.06s 0.085% 89.52%      1.01s  1.43%  github.com/panjf2000/gnet/v2/pkg/netpoll.(*Poller).Trigger
     0.06s 0.085% 89.61%      0.47s  0.67%  internal/sync.(*Mutex).lockSlow
     0.06s 0.085% 89.69%      1.17s  1.66%  runtime.mallocgcSmallNoscan
     0.04s 0.057% 89.75%      3.52s  4.98%  main.rampUpTest.func1
     0.04s 0.057% 89.81%      2.55s  3.61%  runtime.(*mcentral).cacheSpan
     0.03s 0.042% 89.85%      0.88s  1.25%  github.com/albertbausili/celeris/pkg/celeris.newContext
     0.03s 0.042% 89.89%      2.95s  4.18%  runtime.newobject
     0.03s 0.042% 89.93%      0.65s  0.92%  runtime.sellock
     0.02s 0.028% 89.96%      1.36s  1.93%  context.(*cancelCtx).Done
     0.02s 0.028% 89.99%      5.71s  8.08%  github.com/albertbausili/celeris/internal/stream.(*Processor).handleHeaders.func4
     0.02s 0.028% 90.02%      1.72s  2.44%  github.com/albertbausili/celeris/internal/transport.(*Connection).HandleData
     0.02s 0.028% 90.05%      1.14s  1.61%  github.com/albertbausili/celeris/internal/transport.(*connWriter).Write
     0.02s 0.028% 90.08%      0.66s  0.93%  github.com/albertbausili/celeris/pkg/celeris.(*Headers).Set (inline)
     0.02s 0.028% 90.10%      1.34s  1.90%  golang.org/x/net/http2.(*Transport).RoundTripOpt
     0.02s 0.028% 90.13%      0.73s  1.03%  golang.org/x/net/http2/hpack.(*Decoder).Write
     0.02s 0.028% 90.16%      0.41s  0.58%  golang.org/x/net/http2/hpack.(*Decoder).callEmit
     0.02s 0.028% 90.19%      0.69s  0.98%  internal/sync.(*Mutex).Unlock (inline)
     0.02s 0.028% 90.22%      2.65s  3.75%  runtime.(*mcache).refill
     0.02s 0.028% 90.24%      0.39s  0.55%  runtime.(*timers).check
     0.02s 0.028% 90.27%      1.19s  1.68%  runtime.growslice
     0.02s 0.028% 90.30%      0.80s  1.13%  runtime.wakep
     0.01s 0.014% 90.32%      5.27s  7.46%  bufio.(*Reader).Read
     0.01s 0.014% 90.33%      9.71s 13.75%  bufio.(*Writer).Flush
     0.01s 0.014% 90.34%      0.45s  0.64%  context.WithDeadlineCause
     0.01s 0.014% 90.36%      0.89s  1.26%  github.com/albertbausili/celeris/internal/frame.(*Writer).WriteHeaders
     0.01s 0.014% 90.37%      0.42s  0.59%  github.com/albertbausili/celeris/internal/stream.(*Manager).TryOpenStream
     0.01s 0.014% 90.39%      2.92s  4.13%  github.com/albertbausili/celeris/internal/transport.(*Connection).WriteResponse
     0.01s 0.014% 90.40%      1.73s  2.45%  github.com/albertbausili/celeris/internal/transport.(*Server).OnTraffic
     0.01s 0.014% 90.41%      4.49s  6.36%  github.com/albertbausili/celeris/pkg/celeris.(*streamHandlerAdapter).HandleStream
     0.01s 0.014% 90.43%      0.95s  1.35%  github.com/panjf2000/gnet/v2.(*conn).AsyncWrite
     0.01s 0.014% 90.44%      9.18s 13.00%  github.com/panjf2000/gnet/v2.(*conn).write
     0.01s 0.014% 90.46%      2.44s  3.45%  github.com/panjf2000/gnet/v2.(*eventloop).read
     0.01s 0.014% 90.47%     13.22s 18.72%  github.com/panjf2000/gnet/v2/pkg/netpoll.(*Poller).Polling
     0.01s 0.014% 90.49%      8.93s 12.64%  golang.org/x/net/http2.(*ClientConn).writeHeaders
     0.01s 0.014% 90.50%      5.75s  8.14%  golang.org/x/net/http2.(*Framer).ReadFrame
     0.01s 0.014% 90.51%      0.87s  1.23%  golang.org/x/net/http2.(*Framer).WriteRawFrame
     0.01s 0.014% 90.53%      1.35s  1.91%  golang.org/x/net/http2.(*Transport).RoundTrip
     0.01s 0.014% 90.54%      0.41s  0.58%  golang.org/x/net/http2.(*clientConnReadLoop).handleResponse
     0.01s 0.014% 90.56%      0.53s  0.75%  golang.org/x/net/http2.(*clientConnReadLoop).processHeaders
     0.01s 0.014% 90.57%      9.10s 12.88%  golang.org/x/net/http2.(*clientStream).encodeAndWriteHeaders
     0.01s 0.014% 90.58%      9.83s 13.92%  golang.org/x/net/http2.(*clientStream).writeRequest
     0.01s 0.014% 90.60%      0.44s  0.62%  golang.org/x/net/http2.(*dataBuffer).Write
     0.01s 0.014% 90.61%      0.42s  0.59%  golang.org/x/net/http2.getDataBufferChunk
     0.01s 0.014% 90.63%      9.70s 13.73%  golang.org/x/net/http2.writeWithByteTimeout
     0.01s 0.014% 90.64%      0.63s  0.89%  golang.org/x/net/http2/hpack.(*dynamicTable).add
     0.01s 0.014% 90.66%      2.40s  3.40%  golang.org/x/sys/unix.Kevent
     0.01s 0.014% 90.67%      2.39s  3.38%  golang.org/x/sys/unix.kevent
     0.01s 0.014% 90.68%      0.81s  1.15%  internal/runtime/maps.(*Map).growToSmall
     0.01s 0.014% 90.70%      0.67s  0.95%  internal/sync.(*Mutex).unlockSlow
     0.01s 0.014% 90.71%      0.39s  0.55%  internal/sync.runtime_SemacquireMutex
     0.01s 0.014% 90.73%      5.29s  7.49%  io.ReadAtLeast
     0.01s 0.014% 90.74%      9.69s 13.72%  net.(*netFD).Write
     0.01s 0.014% 90.75%      1.76s  2.49%  net/http.(*Client).do
     0.01s 0.014% 90.77%      1.55s  2.19%  runtime.deductAssistCredit
     0.01s 0.014% 90.78%     10.03s 14.20%  runtime.findRunnable
     0.01s 0.014% 90.80%      1.54s  2.18%  runtime.gcDrainN
     0.01s 0.014% 90.81%      1.49s  2.11%  runtime.lock (inline)
     0.01s 0.014% 90.83%      2.53s  3.58%  runtime.lock2
     0.01s 0.014% 90.84%      6.36s  9.00%  runtime.netpoll
     0.01s 0.014% 90.85%      8.77s 12.42%  runtime.park_m
     0.01s 0.014% 90.87%      0.46s  0.65%  runtime.semacquire1
     0.01s 0.014% 90.88%      0.80s  1.13%  runtime.semrelease1
     0.01s 0.014% 90.90%      0.55s  0.78%  sync.(*Mutex).Lock (inline)
         0     0% 90.90%      0.45s  0.64%  context.WithDeadline (inline)
         0     0% 90.90%      0.46s  0.65%  context.WithTimeout
         0     0% 90.90%      0.61s  0.86%  github.com/albertbausili/celeris/internal/frame.(*HeaderEncoder).Encode
         0     0% 90.90%      1.61s  2.28%  github.com/albertbausili/celeris/internal/stream.(*Processor).ProcessFrame
         0     0% 90.90%      1.61s  2.28%  github.com/albertbausili/celeris/internal/stream.(*Processor).ProcessFrameWithConn
         0     0% 90.90%      1.49s  2.11%  github.com/albertbausili/celeris/internal/stream.(*Processor).handleHeaders
         0     0% 90.90%      2.92s  4.13%  github.com/albertbausili/celeris/pkg/celeris.(*Context).flush
         0     0% 90.90%      3.56s  5.04%  github.com/albertbausili/celeris/pkg/celeris.(*Router).ServeHTTP2
         0     0% 90.90%      2.92s  4.13%  github.com/albertbausili/celeris/pkg/celeris.(*streamHandlerAdapter).HandleStream.func1
         0     0% 90.90%      0.52s  0.74%  github.com/albertbausili/celeris/pkg/celeris.HandlerFunc.ServeHTTP2
         0     0% 90.90%      9.18s 13.00%  github.com/panjf2000/gnet/v2.(*conn).asyncWrite
         0     0% 90.90%      2.44s  3.45%  github.com/panjf2000/gnet/v2.(*conn).processIO
         0     0% 90.90%     13.22s 18.72%  github.com/panjf2000/gnet/v2.(*eventloop).orbit
         0     0% 90.90%      2.44s  3.45%  github.com/panjf2000/gnet/v2.(*eventloop).orbit.func1
         0     0% 90.90%      0.81s  1.15%  github.com/panjf2000/gnet/v2/pkg/netpoll.(*Poller).wakePoller
         0     0% 90.90%      1.10s  1.56%  golang.org/x/net/http2.(*ClientConn).RoundTrip (inline)
         0     0% 90.90%      6.91s  9.78%  golang.org/x/net/http2.(*ClientConn).readLoop
         0     0% 90.90%      1.10s  1.56%  golang.org/x/net/http2.(*ClientConn).roundTrip
         0     0% 90.90%      0.68s  0.96%  golang.org/x/net/http2.(*ClientConn).writeStreamReset
         0     0% 90.90%      1.14s  1.61%  golang.org/x/net/http2.(*Framer).endWrite
         0     0% 90.90%      0.38s  0.54%  golang.org/x/net/http2.(*Framer).readMetaFrame
         0     0% 90.90%      0.65s  0.92%  golang.org/x/net/http2.(*clientConnReadLoop).processData
         0     0% 90.90%      6.91s  9.78%  golang.org/x/net/http2.(*clientConnReadLoop).run
         0     0% 90.90%      1.02s  1.44%  golang.org/x/net/http2.(*clientStream).cleanupWriteRequest
         0     0% 90.90%     10.85s 15.36%  golang.org/x/net/http2.(*clientStream).doRequest
         0     0% 90.90%      0.43s  0.61%  golang.org/x/net/http2.(*dataBuffer).lastChunkOrAlloc
         0     0% 90.90%      0.44s  0.62%  golang.org/x/net/http2.(*pipe).Write
         0     0% 90.90%      0.40s  0.57%  golang.org/x/net/http2.init.func1
         0     0% 90.90%      5.28s  7.48%  golang.org/x/net/http2.readFrameHeader
         0     0% 90.90%      9.70s 13.73%  golang.org/x/net/http2.stickyErrWriter.Write
         0     0% 90.90%      0.40s  0.57%  golang.org/x/net/http2/hpack.(*Decoder).parseFieldIndexed
         0     0% 90.90%      0.71s  1.01%  golang.org/x/net/http2/hpack.(*Decoder).parseHeaderFieldRepr
         0     0% 90.90%      0.63s  0.89%  golang.org/x/net/http2/hpack.(*Encoder).WriteField
         0     0% 90.90%      0.47s  0.67%  golang.org/x/net/http2/hpack.(*headerFieldTable).addEntry (inline)
         0     0% 90.90%     13.22s 18.72%  golang.org/x/sync/errgroup.(*Group).Go.func1
         0     0% 90.90%      0.70s  0.99%  golang.org/x/sys/unix.Read (inline)
         0     0% 90.90%      9.17s 12.98%  golang.org/x/sys/unix.Write (inline)
         0     0% 90.90%      0.70s  0.99%  golang.org/x/sys/unix.read
         0     0% 90.90%      9.17s 12.98%  golang.org/x/sys/unix.write
         0     0% 90.90%      5.26s  7.45%  internal/poll.(*FD).Read
         0     0% 90.90%      9.69s 13.72%  internal/poll.(*FD).Write
         0     0% 90.90%     14.93s 21.14%  internal/poll.ignoringEINTRIO (inline)
         0     0% 90.90%      0.36s  0.51%  internal/runtime/maps.NewEmptyMap (inline)
         0     0% 90.90%      0.80s  1.13%  internal/runtime/maps.newGroups (inline)
         0     0% 90.90%      0.80s  1.13%  internal/runtime/maps.newarray
         0     0% 90.90%      0.66s  0.93%  internal/sync.runtime_Semrelease
         0     0% 90.90%      5.29s  7.49%  io.ReadFull (inline)
         0     0% 90.90%      0.52s  0.74%  main.startCelerisHTTP2.func2
         0     0% 90.90%      5.26s  7.45%  net.(*conn).Read
         0     0% 90.90%      9.69s 13.72%  net.(*conn).Write
         0     0% 90.90%      5.26s  7.45%  net.(*netFD).Read
         0     0% 90.90%      1.76s  2.49%  net/http.(*Client).Do (inline)
         0     0% 90.90%      1.67s  2.36%  net/http.(*Client).send
         0     0% 90.90%      0.49s  0.69%  net/http.NewRequestWithContext
         0     0% 90.90%      1.67s  2.36%  net/http.send
         0     0% 90.90%      2.65s  3.75%  runtime.(*mcache).nextFree
         0     0% 90.90%      2.39s  3.38%  runtime.(*mcentral).grow
         0     0% 90.90%      3.33s  4.71%  runtime.(*mheap).alloc.func1
         0     0% 90.90%      3.33s  4.71%  runtime.(*mheap).allocSpan
         0     0% 90.90%      2.27s  3.21%  runtime.(*mspan).initHeapBits
         0     0% 90.90%      1.54s  2.18%  runtime.gcAssistAlloc
         0     0% 90.90%      1.54s  2.18%  runtime.gcAssistAlloc.func2
         0     0% 90.90%      1.54s  2.18%  runtime.gcAssistAlloc1
         0     0% 90.90%     14.28s 20.22%  runtime.gcBgMarkWorker
         0     0% 90.90%     15.73s 22.27%  runtime.gcBgMarkWorker.func2
         0     0% 90.90%     10.47s 14.82%  runtime.gcDrainMarkWorkerDedicated (inline)
         0     0% 90.90%      5.26s  7.45%  runtime.gcDrainMarkWorkerIdle (inline)
         0     0% 90.90%      1.88s  2.66%  runtime.goexit0
         0     0% 90.90%      2.53s  3.58%  runtime.lockWithRank (inline)
         0     0% 90.90%      1.28s  1.81%  runtime.mPark (inline)
         0     0% 90.90%      1.85s  2.62%  runtime.makechan
         0     0% 90.90%      0.36s  0.51%  runtime.makemap_small
         0     0% 90.90%      0.69s  0.98%  runtime.mapassign_faststr
         0     0% 90.90%     10.89s 15.42%  runtime.mcall
         0     0% 90.90%      0.80s  1.13%  runtime.newarray
         0     0% 90.90%      1.28s  1.81%  runtime.notesleep
         0     0% 90.90%      0.65s  0.92%  runtime.notewakeup
         0     0% 90.90%      2.26s  3.20%  runtime.osyield (inline)
         0     0% 90.90%      1.45s  2.05%  runtime.pollWork
         0     0% 90.90%      0.52s  0.74%  runtime.resetspinning
         0     0% 90.90%      2.75s  3.89%  runtime.runqsteal
         0     0% 90.90%     10.60s 15.01%  runtime.schedule
         0     0% 90.90%      1.53s  2.17%  runtime.semasleep
         0     0% 90.90%      0.78s  1.10%  runtime.semawakeup
         0     0% 90.90%      0.65s  0.92%  runtime.startm
         0     0% 90.90%      1.30s  1.84%  runtime.stopm
         0     0% 90.90%      3.17s  4.49%  runtime.sysUsed (inline)
         0     0% 90.90%      3.17s  4.49%  runtime.sysUsedOS (inline)
         0     0% 90.90%     21.42s 30.33%  runtime.systemstack
         0     0% 90.90%      0.69s  0.98%  sync.(*Mutex).Unlock (partial-inline)
         0     0% 90.90%      0.50s  0.71%  sync.(*Pool).Get
         0     0% 90.90%      5.24s  7.42%  syscall.Read (inline)
         0     0% 90.90%      9.69s 13.72%  syscall.Write (inline)
         0     0% 90.90%      5.24s  7.42%  syscall.read
         0     0% 90.90%      9.69s 13.72%  syscall.write
