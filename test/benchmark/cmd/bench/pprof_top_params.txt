File: bench-rampup
Type: cpu
Time: 2025-10-15 10:33:10 CEST
Duration: 15.91s, Total samples = 50.94s (320.17%)
Showing nodes accounting for 46.08s, 90.46% of 50.94s total
Dropped 466 nodes (cum <= 0.25s)
      flat  flat%   sum%        cum   cum%
    12.96s 25.44% 25.44%     13.01s 25.54%  syscall.syscall
    10.72s 21.04% 46.49%     10.73s 21.06%  runtime.(*mspan).heapBitsSmallForAddr
     6.51s 12.78% 59.27%      6.51s 12.78%  runtime.memclrNoHeapPointers
     2.73s  5.36% 64.63%      2.73s  5.36%  runtime.usleep
     2.64s  5.18% 69.81%      2.64s  5.18%  runtime.kevent
     2.43s  4.77% 74.58%      2.43s  4.77%  runtime.madvise
     1.46s  2.87% 77.44%      2.08s  4.08%  runtime.findObject
     1.22s  2.39% 79.84%      1.22s  2.39%  syscall.syscall6
     1.15s  2.26% 82.10%     15.25s 29.94%  runtime.scanobject
     0.95s  1.86% 83.96%      0.95s  1.86%  runtime.pthread_cond_wait
     0.52s  1.02% 84.98%      0.87s  1.71%  runtime.greyobject
     0.38s  0.75% 85.73%      0.38s  0.75%  runtime.pthread_cond_signal
     0.28s  0.55% 86.28%      0.28s  0.55%  internal/runtime/atomic.(*Uint8).Load (inline)
     0.24s  0.47% 86.75%     10.97s 21.54%  runtime.(*mspan).typePointersOfUnchecked
     0.16s  0.31% 87.06%      0.52s  1.02%  internal/sync.(*Mutex).Lock (inline)
     0.16s  0.31% 87.38%      0.41s   0.8%  runtime.wbBufFlush1
     0.12s  0.24% 87.61%      3.33s  6.54%  runtime.(*mcentral).cacheSpan
     0.12s  0.24% 87.85%     10.85s 21.30%  runtime.gcDrain
     0.12s  0.24% 88.08%      6.26s 12.29%  runtime.mallocgcSmallScanNoHeader
     0.11s  0.22% 88.30%      0.64s  1.26%  runtime.selectgo
     0.10s   0.2% 88.50%      1.86s  3.65%  runtime.stealWork
     0.06s  0.12% 88.61%     12.74s 25.01%  runtime.mallocgc
     0.06s  0.12% 88.73%      1.31s  2.57%  runtime.mallocgcSmallNoscan
     0.05s 0.098% 88.83%      0.36s  0.71%  internal/sync.(*Mutex).lockSlow
     0.05s 0.098% 88.93%         2s  3.93%  runtime.growslice
     0.05s 0.098% 89.03%      1.33s  2.61%  runtime.lock2
     0.05s 0.098% 89.12%      1.71s  3.36%  runtime.runqgrab
     0.04s 0.079% 89.20%      4.04s  7.93%  main.rampUpTest.func1
     0.03s 0.059% 89.26%      2.55s  5.01%  github.com/albertbausili/celeris/internal/transport.(*Connection).HandleData
     0.03s 0.059% 89.32%      0.58s  1.14%  internal/sync.(*Mutex).Unlock (inline)
     0.03s 0.059% 89.38%      4.96s  9.74%  runtime.gcDrainN
     0.03s 0.059% 89.44%      5.60s 10.99%  runtime.schedule
     0.03s 0.059% 89.50%     19.26s 37.81%  runtime.systemstack
     0.03s 0.059% 89.56%      0.68s  1.33%  sync.(*Pool).Get
     0.02s 0.039% 89.60%      3.46s  6.79%  context.(*cancelCtx).Done
     0.02s 0.039% 89.63%      0.28s  0.55%  gcWriteBarrier
     0.02s 0.039% 89.67%      0.53s  1.04%  golang.org/x/net/http2.getDataBufferChunk
     0.02s 0.039% 89.71%      0.62s  1.22%  golang.org/x/net/http2/hpack.(*dynamicTable).add
     0.02s 0.039% 89.75%      0.55s  1.08%  internal/sync.(*Mutex).unlockSlow
     0.02s 0.039% 89.79%      2.26s  4.44%  net/http.(*Client).do
     0.02s 0.039% 89.83%      0.26s  0.51%  runtime.(*timers).check
     0.02s 0.039% 89.87%      5.33s 10.46%  runtime.findRunnable
     0.02s 0.039% 89.91%      0.31s  0.61%  runtime.semacquire1
     0.01s  0.02% 89.93%      0.64s  1.26%  context.WithTimeout
     0.01s  0.02% 89.95%      0.27s  0.53%  encoding/json.mapEncoder.encode
     0.01s  0.02% 89.97%      8.06s 15.82%  github.com/albertbausili/celeris/internal/stream.(*Processor).handleHeaders.func4
     0.01s  0.02% 89.99%      0.29s  0.57%  github.com/albertbausili/celeris/internal/stream.(*Stream).GetHeaders
     0.01s  0.02% 90.01%      2.41s  4.73%  github.com/albertbausili/celeris/internal/transport.(*Connection).WriteResponse
     0.01s  0.02% 90.03%      0.27s  0.53%  github.com/albertbausili/celeris/pkg/celeris.(*Router).FindRoute
     0.01s  0.02% 90.05%      3.58s  7.03%  github.com/albertbausili/celeris/pkg/celeris.(*Router).ServeHTTP2
     0.01s  0.02% 90.07%      4.79s  9.40%  github.com/albertbausili/celeris/pkg/celeris.(*streamHandlerAdapter).HandleStream
     0.01s  0.02% 90.09%      0.59s  1.16%  github.com/panjf2000/gnet/v2.(*conn).AsyncWrite
     0.01s  0.02% 90.11%      8.86s 17.39%  github.com/panjf2000/gnet/v2/pkg/netpoll.(*Poller).Polling
     0.01s  0.02% 90.13%      0.58s  1.14%  github.com/panjf2000/gnet/v2/pkg/netpoll.(*Poller).Trigger
     0.01s  0.02% 90.15%      2.78s  5.46%  golang.org/x/net/http2.(*Framer).ReadFrame
     0.01s  0.02% 90.16%      0.81s  1.59%  golang.org/x/net/http2.(*Framer).endWrite
     0.01s  0.02% 90.18%      1.70s  3.34%  golang.org/x/net/http2.(*Transport).RoundTrip
     0.01s  0.02% 90.20%      0.59s  1.16%  golang.org/x/net/http2.(*clientConnReadLoop).processHeaders
     0.01s  0.02% 90.22%      5.22s 10.25%  golang.org/x/net/http2.(*clientStream).encodeAndWriteHeaders
     0.01s  0.02% 90.24%      2.13s  4.18%  golang.org/x/net/http2.readFrameHeader
     0.01s  0.02% 90.26%      2.14s  4.20%  io.ReadAtLeast
     0.01s  0.02% 90.28%      2.13s  4.18%  net/http.send
     0.01s  0.02% 90.30%      3.41s  6.69%  runtime.(*mcache).nextFree
     0.01s  0.02% 90.32%      3.40s  6.67%  runtime.(*mcache).refill
     0.01s  0.02% 90.34%      3.07s  6.03%  runtime.(*mcentral).grow
     0.01s  0.02% 90.36%      4.99s  9.80%  runtime.deductAssistCredit
     0.01s  0.02% 90.38%      4.24s  8.32%  runtime.makechan
     0.01s  0.02% 90.40%      2.60s  5.10%  runtime.netpoll
     0.01s  0.02% 90.42%      4.67s  9.17%  runtime.newobject
     0.01s  0.02% 90.44%      0.76s  1.49%  runtime.notesleep
     0.01s  0.02% 90.46%      0.28s  0.55%  runtime.sellock
         0     0% 90.46%      2.12s  4.16%  bufio.(*Reader).Read
         0     0% 90.46%      5.41s 10.62%  bufio.(*Writer).Flush
         0     0% 90.46%      0.62s  1.22%  context.WithDeadline (inline)
         0     0% 90.46%      0.62s  1.22%  context.WithDeadlineCause
         0     0% 90.46%      0.30s  0.59%  encoding/json.(*encodeState).marshal
         0     0% 90.46%      0.29s  0.57%  encoding/json.(*encodeState).reflectValue
         0     0% 90.46%      0.35s  0.69%  encoding/json.Marshal
         0     0% 90.46%      0.32s  0.63%  github.com/albertbausili/celeris/internal/frame.(*HeaderEncoder).Close
         0     0% 90.46%      0.59s  1.16%  github.com/albertbausili/celeris/internal/frame.(*HeaderEncoder).Encode
         0     0% 90.46%      0.62s  1.22%  github.com/albertbausili/celeris/internal/frame.(*Writer).WriteHeaders
         0     0% 90.46%      0.67s  1.32%  github.com/albertbausili/celeris/internal/stream.(*Manager).TryOpenStream
         0     0% 90.46%      2.28s  4.48%  github.com/albertbausili/celeris/internal/stream.(*Processor).ProcessFrame
         0     0% 90.46%      2.29s  4.50%  github.com/albertbausili/celeris/internal/stream.(*Processor).ProcessFrameWithConn
         0     0% 90.46%      2.24s  4.40%  github.com/albertbausili/celeris/internal/stream.(*Processor).handleHeaders
         0     0% 90.46%      0.52s  1.02%  github.com/albertbausili/celeris/internal/stream.(*Processor).handleHeaders.func3
         0     0% 90.46%      0.63s  1.24%  github.com/albertbausili/celeris/internal/stream.(*Stream).AddHeader
         0     0% 90.46%      0.58s  1.14%  github.com/albertbausili/celeris/internal/stream.NewStream
         0     0% 90.46%      2.55s  5.01%  github.com/albertbausili/celeris/internal/transport.(*Server).OnTraffic
         0     0% 90.46%      0.80s  1.57%  github.com/albertbausili/celeris/internal/transport.(*connWriter).Write
         0     0% 90.46%      0.54s  1.06%  github.com/albertbausili/celeris/pkg/celeris.(*Context).JSON
         0     0% 90.46%      2.41s  4.73%  github.com/albertbausili/celeris/pkg/celeris.(*Context).flush
         0     0% 90.46%      0.79s  1.55%  github.com/albertbausili/celeris/pkg/celeris.(*Headers).Set (inline)
         0     0% 90.46%      2.41s  4.73%  github.com/albertbausili/celeris/pkg/celeris.(*streamHandlerAdapter).HandleStream.func1
         0     0% 90.46%      0.70s  1.37%  github.com/albertbausili/celeris/pkg/celeris.HandlerFunc.ServeHTTP2
         0     0% 90.46%      1.20s  2.36%  github.com/albertbausili/celeris/pkg/celeris.newContext
         0     0% 90.46%      5.16s 10.13%  github.com/panjf2000/gnet/v2.(*conn).asyncWrite
         0     0% 90.46%      2.90s  5.69%  github.com/panjf2000/gnet/v2.(*conn).processIO
         0     0% 90.46%      5.15s 10.11%  github.com/panjf2000/gnet/v2.(*conn).write
         0     0% 90.46%      8.85s 17.37%  github.com/panjf2000/gnet/v2.(*eventloop).orbit
         0     0% 90.46%      2.91s  5.71%  github.com/panjf2000/gnet/v2.(*eventloop).orbit.func1
         0     0% 90.46%      2.90s  5.69%  github.com/panjf2000/gnet/v2.(*eventloop).read
         0     0% 90.46%      0.45s  0.88%  github.com/panjf2000/gnet/v2/pkg/netpoll.(*Poller).wakePoller
         0     0% 90.46%      1.48s  2.91%  golang.org/x/net/http2.(*ClientConn).RoundTrip (inline)
         0     0% 90.46%      4.05s  7.95%  golang.org/x/net/http2.(*ClientConn).readLoop
         0     0% 90.46%      1.48s  2.91%  golang.org/x/net/http2.(*ClientConn).roundTrip
         0     0% 90.46%      5.11s 10.03%  golang.org/x/net/http2.(*ClientConn).writeHeaders
         0     0% 90.46%      0.29s  0.57%  golang.org/x/net/http2.(*ClientConn).writeStreamReset
         0     0% 90.46%      0.61s  1.20%  golang.org/x/net/http2.(*Framer).WriteRawFrame
         0     0% 90.46%      0.43s  0.84%  golang.org/x/net/http2.(*Framer).readMetaFrame
         0     0% 90.46%      1.69s  3.32%  golang.org/x/net/http2.(*Transport).RoundTripOpt
         0     0% 90.46%      0.49s  0.96%  golang.org/x/net/http2.(*clientConnReadLoop).handleResponse
         0     0% 90.46%      0.77s  1.51%  golang.org/x/net/http2.(*clientConnReadLoop).processData
         0     0% 90.46%      4.05s  7.95%  golang.org/x/net/http2.(*clientConnReadLoop).run
         0     0% 90.46%      0.55s  1.08%  golang.org/x/net/http2.(*clientStream).cleanupWriteRequest
         0     0% 90.46%      6.32s 12.41%  golang.org/x/net/http2.(*clientStream).doRequest
         0     0% 90.46%      5.77s 11.33%  golang.org/x/net/http2.(*clientStream).writeRequest
         0     0% 90.46%      0.57s  1.12%  golang.org/x/net/http2.(*dataBuffer).Write
         0     0% 90.46%      0.57s  1.12%  golang.org/x/net/http2.(*dataBuffer).lastChunkOrAlloc
         0     0% 90.46%      0.57s  1.12%  golang.org/x/net/http2.(*pipe).Write
         0     0% 90.46%      0.51s  1.00%  golang.org/x/net/http2.init.func1
         0     0% 90.46%      5.41s 10.62%  golang.org/x/net/http2.stickyErrWriter.Write
         0     0% 90.46%      5.41s 10.62%  golang.org/x/net/http2.writeWithByteTimeout
         0     0% 90.46%      0.85s  1.67%  golang.org/x/net/http2/hpack.(*Decoder).Write
         0     0% 90.46%      0.65s  1.28%  golang.org/x/net/http2/hpack.(*Decoder).callEmit
         0     0% 90.46%      0.58s  1.14%  golang.org/x/net/http2/hpack.(*Decoder).parseFieldIndexed
         0     0% 90.46%      0.27s  0.53%  golang.org/x/net/http2/hpack.(*Decoder).parseFieldLiteral
         0     0% 90.46%      0.85s  1.67%  golang.org/x/net/http2/hpack.(*Decoder).parseHeaderFieldRepr
         0     0% 90.46%      0.60s  1.18%  golang.org/x/net/http2/hpack.(*Encoder).WriteField
         0     0% 90.46%      0.49s  0.96%  golang.org/x/net/http2/hpack.(*headerFieldTable).addEntry (inline)
         0     0% 90.46%      0.28s  0.55%  golang.org/x/net/http2/hpack.(*headerFieldTable).init (inline)
         0     0% 90.46%      0.46s   0.9%  golang.org/x/net/http2/hpack.NewEncoder
         0     0% 90.46%      8.86s 17.39%  golang.org/x/sync/errgroup.(*Group).Go.func1
         0     0% 90.46%      1.22s  2.39%  golang.org/x/sys/unix.Kevent
         0     0% 90.46%      0.35s  0.69%  golang.org/x/sys/unix.Read (inline)
         0     0% 90.46%      5.15s 10.11%  golang.org/x/sys/unix.Write (inline)
         0     0% 90.46%      1.22s  2.39%  golang.org/x/sys/unix.kevent
         0     0% 90.46%      0.35s  0.69%  golang.org/x/sys/unix.read
         0     0% 90.46%      5.15s 10.11%  golang.org/x/sys/unix.write
         0     0% 90.46%      2.12s  4.16%  internal/poll.(*FD).Read
         0     0% 90.46%      5.40s 10.60%  internal/poll.(*FD).Write
         0     0% 90.46%      7.49s 14.70%  internal/poll.ignoringEINTRIO (inline)
         0     0% 90.46%      1.39s  2.73%  internal/runtime/maps.(*Map).growToSmall
         0     0% 90.46%      0.50s  0.98%  internal/runtime/maps.NewEmptyMap (inline)
         0     0% 90.46%      1.41s  2.77%  internal/runtime/maps.newGroups (inline)
         0     0% 90.46%      1.41s  2.77%  internal/runtime/maps.newarray
         0     0% 90.46%      0.53s  1.04%  internal/sync.runtime_Semrelease
         0     0% 90.46%      2.14s  4.20%  io.ReadFull (inline)
         0     0% 90.46%      0.70s  1.37%  main.startCelerisHTTP2.func3
         0     0% 90.46%      2.12s  4.16%  net.(*conn).Read
         0     0% 90.46%      5.40s 10.60%  net.(*conn).Write
         0     0% 90.46%      2.12s  4.16%  net.(*netFD).Read
         0     0% 90.46%      5.40s 10.60%  net.(*netFD).Write
         0     0% 90.46%      2.26s  4.44%  net/http.(*Client).Do (inline)
         0     0% 90.46%      2.13s  4.18%  net/http.(*Client).send
         0     0% 90.46%      0.51s  1.00%  net/http.NewRequestWithContext
         0     0% 90.46%      0.33s  0.65%  net/http.send.func1 (inline)
         0     0% 90.46%      0.27s  0.53%  runtime.(*mSpanStateBox).get (inline)
         0     0% 90.46%      2.64s  5.18%  runtime.(*mheap).alloc.func1
         0     0% 90.46%      2.63s  5.16%  runtime.(*mheap).allocSpan
         0     0% 90.46%      2.87s  5.63%  runtime.(*mspan).initHeapBits
         0     0% 90.46%      4.98s  9.78%  runtime.gcAssistAlloc
         0     0% 90.46%      4.97s  9.76%  runtime.gcAssistAlloc.func2
         0     0% 90.46%      4.97s  9.76%  runtime.gcAssistAlloc1
         0     0% 90.46%     10.54s 20.69%  runtime.gcBgMarkWorker
         0     0% 90.46%     10.85s 21.30%  runtime.gcBgMarkWorker.func2
         0     0% 90.46%      8.08s 15.86%  runtime.gcDrainMarkWorkerDedicated (inline)
         0     0% 90.46%      2.77s  5.44%  runtime.gcDrainMarkWorkerIdle (inline)
         0     0% 90.46%      1.02s  2.00%  runtime.goexit0
         0     0% 90.46%      0.56s  1.10%  runtime.lock (inline)
         0     0% 90.46%      1.33s  2.61%  runtime.lockWithRank (inline)
         0     0% 90.46%      0.76s  1.49%  runtime.mPark (inline)
         0     0% 90.46%      0.50s  0.98%  runtime.makemap_small
         0     0% 90.46%      0.53s  1.04%  runtime.makeslice
         0     0% 90.46%      0.27s  0.53%  runtime.mapassign
         0     0% 90.46%      1.16s  2.28%  runtime.mapassign_faststr
         0     0% 90.46%      5.83s 11.44%  runtime.mcall
         0     0% 90.46%      1.41s  2.77%  runtime.newarray
         0     0% 90.46%      0.33s  0.65%  runtime.notewakeup
         0     0% 90.46%      1.07s  2.10%  runtime.osyield (inline)
         0     0% 90.46%      4.65s  9.13%  runtime.park_m
         0     0% 90.46%      0.31s  0.61%  runtime.pollWork
         0     0% 90.46%      1.71s  3.36%  runtime.runqsteal
         0     0% 90.46%      0.95s  1.86%  runtime.semasleep
         0     0% 90.46%      0.39s  0.77%  runtime.semawakeup
         0     0% 90.46%      0.61s  1.20%  runtime.semrelease1
         0     0% 90.46%      0.33s  0.65%  runtime.startm
         0     0% 90.46%      0.79s  1.55%  runtime.stopm
         0     0% 90.46%      2.43s  4.77%  runtime.sysUsed (inline)
         0     0% 90.46%      2.43s  4.77%  runtime.sysUsedOS (inline)
         0     0% 90.46%      0.37s  0.73%  runtime.wakep
         0     0% 90.46%      0.41s   0.8%  runtime.wbBufFlush
         0     0% 90.46%      0.41s   0.8%  runtime.wbBufFlush.func1
         0     0% 90.46%      0.52s  1.02%  sync.(*Mutex).Lock (inline)
         0     0% 90.46%      0.58s  1.14%  sync.(*Mutex).Unlock
         0     0% 90.46%      2.10s  4.12%  syscall.Read (inline)
         0     0% 90.46%      5.39s 10.58%  syscall.Write (inline)
         0     0% 90.46%      2.10s  4.12%  syscall.read
         0     0% 90.46%      5.39s 10.58%  syscall.write
