File: bench-rampup
Type: cpu
Time: 2025-10-15 10:32:48 CEST
Duration: 15.28s, Total samples = 57.88s (378.91%)
Showing nodes accounting for 52.01s, 89.86% of 57.88s total
Dropped 464 nodes (cum <= 0.29s)
      flat  flat%   sum%        cum   cum%
    18.30s 31.62% 31.62%     18.31s 31.63%  syscall.syscall
     6.99s 12.08% 43.69%      6.99s 12.08%  runtime.(*mspan).heapBitsSmallForAddr
     5.01s  8.66% 52.35%      5.01s  8.66%  runtime.kevent
     4.08s  7.05% 59.40%      4.08s  7.05%  runtime.usleep
     3.62s  6.25% 65.65%      3.62s  6.25%  runtime.memclrNoHeapPointers
     2.62s  4.53% 70.18%      2.62s  4.53%  runtime.madvise
     2.35s  4.06% 74.24%      2.93s  5.06%  runtime.findObject
     1.62s  2.80% 77.04%      1.63s  2.82%  syscall.syscall6
     1.52s  2.63% 79.66%     13.54s 23.39%  runtime.scanobject
     1.36s  2.35% 82.01%      1.36s  2.35%  runtime.pthread_cond_wait
        1s  1.73% 83.74%      1.52s  2.63%  runtime.greyobject
     0.52s   0.9% 84.64%      0.52s   0.9%  runtime.pthread_cond_signal
     0.34s  0.59% 85.23%      7.33s 12.66%  runtime.(*mspan).typePointersOfUnchecked
     0.32s  0.55% 85.78%      0.32s  0.55%  runtime.typePointers.nextFast (inline)
     0.26s  0.45% 86.23%     13.06s 22.56%  runtime.gcDrain
     0.22s  0.38% 86.61%      0.83s  1.43%  runtime.selectgo
     0.15s  0.26% 86.87%      0.65s  1.12%  internal/sync.(*Mutex).Lock (inline)
     0.12s  0.21% 87.08%      7.41s 12.80%  runtime.mallocgc
     0.11s  0.19% 87.27%      2.74s  4.73%  runtime.stealWork
     0.10s  0.17% 87.44%      3.80s  6.57%  runtime.mallocgcSmallScanNoHeader
     0.09s  0.16% 87.60%      2.05s  3.54%  runtime.lock2
     0.09s  0.16% 87.75%      0.29s   0.5%  runtime.wbBufFlush1
     0.07s  0.12% 87.87%      0.62s  1.07%  internal/sync.(*Mutex).Unlock (inline)
     0.07s  0.12% 87.99%      0.50s  0.86%  internal/sync.(*Mutex).lockSlow
     0.07s  0.12% 88.11%      0.84s  1.45%  runtime.mallocgcSmallNoscan
     0.07s  0.12% 88.23%      0.52s   0.9%  sync.(*Pool).Get
     0.06s   0.1% 88.34%      2.43s  4.20%  runtime.runqgrab
     0.05s 0.086% 88.42%      0.48s  0.83%  runtime.semacquire1
     0.04s 0.069% 88.49%      0.41s  0.71%  golang.org/x/net/http2/hpack.(*Decoder).parseFieldIndexed
     0.04s 0.069% 88.56%      1.10s  1.90%  runtime.growslice
     0.04s 0.069% 88.63%      5.03s  8.69%  runtime.netpoll
     0.03s 0.052% 88.68%      5.61s  9.69%  github.com/albertbausili/celeris/internal/stream.(*Processor).handleHeaders.func4
     0.03s 0.052% 88.74%      2.20s  3.80%  github.com/albertbausili/celeris/internal/transport.(*Connection).WriteResponse
     0.03s 0.052% 88.79%      1.63s  2.82%  net/http.send
     0.03s 0.052% 88.84%      2.35s  4.06%  runtime.(*mcentral).cacheSpan
     0.02s 0.035% 88.87%      1.91s  3.30%  context.(*cancelCtx).Done
     0.02s 0.035% 88.91%      1.66s  2.87%  github.com/albertbausili/celeris/internal/stream.(*Processor).handleHeaders
     0.02s 0.035% 88.94%      3.75s  6.48%  github.com/albertbausili/celeris/pkg/celeris.(*streamHandlerAdapter).HandleStream
     0.02s 0.035% 88.98%      0.56s  0.97%  github.com/panjf2000/gnet/v2/pkg/netpoll.(*Poller).Trigger
     0.02s 0.035% 89.01%      4.92s  8.50%  golang.org/x/net/http2.(*clientConnReadLoop).run
     0.02s 0.035% 89.05%      0.62s  1.07%  golang.org/x/net/http2/hpack.(*Decoder).Write
     0.02s 0.035% 89.08%      3.30s  5.70%  io.ReadAtLeast
     0.02s 0.035% 89.12%      3.16s  5.46%  main.rampUpTest.func1
     0.02s 0.035% 89.15%      2.49s  4.30%  runtime.gcDrainN
     0.02s 0.035% 89.18%      2.91s  5.03%  runtime.newobject
     0.02s 0.035% 89.22%      0.41s  0.71%  runtime.sellock
     0.01s 0.017% 89.24%      0.30s  0.52%  context.WithDeadlineCause
     0.01s 0.017% 89.25%      0.45s  0.78%  github.com/albertbausili/celeris/internal/frame.(*HeaderEncoder).Encode
     0.01s 0.017% 89.27%      0.34s  0.59%  github.com/albertbausili/celeris/internal/stream.(*Manager).GetStream
     0.01s 0.017% 89.29%      0.32s  0.55%  github.com/albertbausili/celeris/internal/stream.(*Processor).handleHeaders.func3
     0.01s 0.017% 89.31%      1.86s  3.21%  github.com/albertbausili/celeris/internal/transport.(*Connection).HandleData
     0.01s 0.017% 89.32%      7.15s 12.35%  github.com/panjf2000/gnet/v2.(*conn).write
     0.01s 0.017% 89.34%     10.53s 18.19%  github.com/panjf2000/gnet/v2/pkg/netpoll.(*Poller).Polling
     0.01s 0.017% 89.36%      1.11s  1.92%  golang.org/x/net/http2.(*ClientConn).RoundTrip (inline)
     0.01s 0.017% 89.37%      1.10s  1.90%  golang.org/x/net/http2.(*ClientConn).roundTrip
     0.01s 0.017% 89.39%      3.79s  6.55%  golang.org/x/net/http2.(*Framer).ReadFrame
     0.01s 0.017% 89.41%      0.33s  0.57%  golang.org/x/net/http2.(*Framer).readMetaFrame
     0.01s 0.017% 89.43%      1.31s  2.26%  golang.org/x/net/http2.(*Transport).RoundTrip
     0.01s 0.017% 89.44%      0.50s  0.86%  golang.org/x/net/http2.(*clientConnReadLoop).handleResponse
     0.01s 0.017% 89.46%      0.61s  1.05%  golang.org/x/net/http2.(*clientConnReadLoop).processData
     0.01s 0.017% 89.48%      1.07s  1.85%  golang.org/x/net/http2.(*clientStream).cleanupWriteRequest
     0.01s 0.017% 89.50%      8.77s 15.15%  golang.org/x/net/http2.(*clientStream).doRequest
     0.01s 0.017% 89.51%      7.05s 12.18%  golang.org/x/net/http2.(*clientStream).encodeAndWriteHeaders
     0.01s 0.017% 89.53%      7.69s 13.29%  golang.org/x/net/http2.(*clientStream).writeRequest
     0.01s 0.017% 89.55%      7.63s 13.18%  golang.org/x/net/http2.writeWithByteTimeout
     0.01s 0.017% 89.56%      0.39s  0.67%  golang.org/x/net/http2/hpack.(*Decoder).callEmit
     0.01s 0.017% 89.58%      0.48s  0.83%  golang.org/x/net/http2/hpack.(*Encoder).WriteField
     0.01s 0.017% 89.60%      1.64s  2.83%  golang.org/x/sys/unix.Kevent
     0.01s 0.017% 89.62%      3.28s  5.67%  internal/poll.(*FD).Read
     0.01s 0.017% 89.63%      0.87s  1.50%  internal/runtime/maps.(*Map).growToSmall
     0.01s 0.017% 89.65%      0.40s  0.69%  internal/sync.runtime_SemacquireMutex
     0.01s 0.017% 89.67%      0.72s  1.24%  main.startCelerisHTTP2.func2
     0.01s 0.017% 89.69%      1.73s  2.99%  net/http.(*Client).Do (inline)
     0.01s 0.017% 89.70%      1.72s  2.97%  net/http.(*Client).do
     0.01s 0.017% 89.72%      0.40s  0.69%  net/http.NewRequestWithContext
     0.01s 0.017% 89.74%      2.47s  4.27%  runtime.(*mcache).nextFree
     0.01s 0.017% 89.75%      2.42s  4.18%  runtime.(*mcache).refill
     0.01s 0.017% 89.77%      7.89s 13.63%  runtime.findRunnable
     0.01s 0.017% 89.79%      0.88s  1.52%  runtime.mapassign_faststr
     0.01s 0.017% 89.81%      2.44s  4.22%  runtime.runqsteal
     0.01s 0.017% 89.82%      8.29s 14.32%  runtime.schedule
     0.01s 0.017% 89.84%      0.58s  1.00%  runtime.wakep
     0.01s 0.017% 89.86%      0.66s  1.14%  sync.(*Mutex).Lock (inline)
         0     0% 89.86%      3.28s  5.67%  bufio.(*Reader).Read
         0     0% 89.86%      7.63s 13.18%  bufio.(*Writer).Flush
         0     0% 89.86%      0.30s  0.52%  context.WithDeadline (inline)
         0     0% 89.86%      0.32s  0.55%  context.WithTimeout
         0     0% 89.86%      0.51s  0.88%  github.com/albertbausili/celeris/internal/frame.(*Writer).WriteHeaders
         0     0% 89.86%      0.49s  0.85%  github.com/albertbausili/celeris/internal/stream.(*Manager).TryOpenStream
         0     0% 89.86%      1.68s  2.90%  github.com/albertbausili/celeris/internal/stream.(*Processor).ProcessFrame
         0     0% 89.86%      1.69s  2.92%  github.com/albertbausili/celeris/internal/stream.(*Processor).ProcessFrameWithConn
         0     0% 89.86%      0.30s  0.52%  github.com/albertbausili/celeris/internal/stream.(*Stream).AddHeader
         0     0% 89.86%      0.36s  0.62%  github.com/albertbausili/celeris/internal/stream.NewStream
         0     0% 89.86%      1.88s  3.25%  github.com/albertbausili/celeris/internal/transport.(*Server).OnTraffic
         0     0% 89.86%      0.69s  1.19%  github.com/albertbausili/celeris/internal/transport.(*connWriter).Write
         0     0% 89.86%      0.52s   0.9%  github.com/albertbausili/celeris/pkg/celeris.(*Context).JSON
         0     0% 89.86%      2.20s  3.80%  github.com/albertbausili/celeris/pkg/celeris.(*Context).flush
         0     0% 89.86%      0.70s  1.21%  github.com/albertbausili/celeris/pkg/celeris.(*Headers).Set (inline)
         0     0% 89.86%      2.95s  5.10%  github.com/albertbausili/celeris/pkg/celeris.(*Router).ServeHTTP2
         0     0% 89.86%      2.20s  3.80%  github.com/albertbausili/celeris/pkg/celeris.(*streamHandlerAdapter).HandleStream.func1
         0     0% 89.86%      0.72s  1.24%  github.com/albertbausili/celeris/pkg/celeris.HandlerFunc.ServeHTTP2
         0     0% 89.86%      0.75s  1.30%  github.com/albertbausili/celeris/pkg/celeris.newContext
         0     0% 89.86%      0.56s  0.97%  github.com/panjf2000/gnet/v2.(*conn).AsyncWrite
         0     0% 89.86%      7.15s 12.35%  github.com/panjf2000/gnet/v2.(*conn).asyncWrite
         0     0% 89.86%      2.13s  3.68%  github.com/panjf2000/gnet/v2.(*conn).processIO
         0     0% 89.86%     10.53s 18.19%  github.com/panjf2000/gnet/v2.(*eventloop).orbit
         0     0% 89.86%      2.13s  3.68%  github.com/panjf2000/gnet/v2.(*eventloop).orbit.func1
         0     0% 89.86%      2.13s  3.68%  github.com/panjf2000/gnet/v2.(*eventloop).read
         0     0% 89.86%      0.47s  0.81%  github.com/panjf2000/gnet/v2/pkg/netpoll.(*Poller).wakePoller
         0     0% 89.86%      4.92s  8.50%  golang.org/x/net/http2.(*ClientConn).readLoop
         0     0% 89.86%      6.94s 11.99%  golang.org/x/net/http2.(*ClientConn).writeHeaders
         0     0% 89.86%      0.58s  1.00%  golang.org/x/net/http2.(*ClientConn).writeStreamReset
         0     0% 89.86%      0.50s  0.86%  golang.org/x/net/http2.(*Framer).WriteRawFrame
         0     0% 89.86%      0.70s  1.21%  golang.org/x/net/http2.(*Framer).endWrite
         0     0% 89.86%      1.30s  2.25%  golang.org/x/net/http2.(*Transport).RoundTripOpt
         0     0% 89.86%      0.57s  0.98%  golang.org/x/net/http2.(*clientConnReadLoop).processHeaders
         0     0% 89.86%      0.35s   0.6%  golang.org/x/net/http2.(*dataBuffer).Write
         0     0% 89.86%      0.35s   0.6%  golang.org/x/net/http2.(*dataBuffer).lastChunkOrAlloc
         0     0% 89.86%      0.36s  0.62%  golang.org/x/net/http2.(*pipe).Write
         0     0% 89.86%      0.34s  0.59%  golang.org/x/net/http2.getDataBufferChunk
         0     0% 89.86%      0.31s  0.54%  golang.org/x/net/http2.init.func1
         0     0% 89.86%      3.29s  5.68%  golang.org/x/net/http2.readFrameHeader
         0     0% 89.86%      7.63s 13.18%  golang.org/x/net/http2.stickyErrWriter.Write
         0     0% 89.86%      0.60s  1.04%  golang.org/x/net/http2/hpack.(*Decoder).parseHeaderFieldRepr
         0     0% 89.86%      0.44s  0.76%  golang.org/x/net/http2/hpack.(*dynamicTable).add
         0     0% 89.86%      0.35s   0.6%  golang.org/x/net/http2/hpack.(*headerFieldTable).addEntry (inline)
         0     0% 89.86%     10.53s 18.19%  golang.org/x/sync/errgroup.(*Group).Go.func1
         0     0% 89.86%      7.14s 12.34%  golang.org/x/sys/unix.Write (inline)
         0     0% 89.86%      1.63s  2.82%  golang.org/x/sys/unix.kevent
         0     0% 89.86%      7.14s 12.34%  golang.org/x/sys/unix.write
         0     0% 89.86%      7.62s 13.17%  internal/poll.(*FD).Write
         0     0% 89.86%     10.89s 18.81%  internal/poll.ignoringEINTRIO (inline)
         0     0% 89.86%      0.90s  1.55%  internal/runtime/maps.newGroups (inline)
         0     0% 89.86%      0.90s  1.55%  internal/runtime/maps.newarray
         0     0% 89.86%      0.55s  0.95%  internal/sync.(*Mutex).unlockSlow
         0     0% 89.86%      0.55s  0.95%  internal/sync.runtime_Semrelease
         0     0% 89.86%      0.30s  0.52%  io.Copy (inline)
         0     0% 89.86%      3.30s  5.70%  io.ReadFull (inline)
         0     0% 89.86%      0.30s  0.52%  io.copyBuffer
         0     0% 89.86%      0.30s  0.52%  io.discard.ReadFrom
         0     0% 89.86%      3.28s  5.67%  net.(*conn).Read
         0     0% 89.86%      7.62s 13.17%  net.(*conn).Write
         0     0% 89.86%      3.28s  5.67%  net.(*netFD).Read
         0     0% 89.86%      7.62s 13.17%  net.(*netFD).Write
         0     0% 89.86%      1.63s  2.82%  net/http.(*Client).send
         0     0% 89.86%      2.24s  3.87%  runtime.(*mcentral).grow
         0     0% 89.86%      2.80s  4.84%  runtime.(*mheap).alloc.func1
         0     0% 89.86%      2.80s  4.84%  runtime.(*mheap).allocSpan
         0     0% 89.86%      2.10s  3.63%  runtime.(*mspan).initHeapBits
         0     0% 89.86%      0.39s  0.67%  runtime.(*timers).check
         0     0% 89.86%      2.50s  4.32%  runtime.deductAssistCredit
         0     0% 89.86%      2.50s  4.32%  runtime.gcAssistAlloc
         0     0% 89.86%      2.52s  4.35%  runtime.gcAssistAlloc.func2
         0     0% 89.86%      2.52s  4.35%  runtime.gcAssistAlloc1
         0     0% 89.86%     11.61s 20.06%  runtime.gcBgMarkWorker
         0     0% 89.86%     13.06s 22.56%  runtime.gcBgMarkWorker.func2
         0     0% 89.86%      8.59s 14.84%  runtime.gcDrainMarkWorkerDedicated (inline)
         0     0% 89.86%      4.47s  7.72%  runtime.gcDrainMarkWorkerIdle (inline)
         0     0% 89.86%      1.58s  2.73%  runtime.goexit0
         0     0% 89.86%      1.05s  1.81%  runtime.lock (inline)
         0     0% 89.86%      2.05s  3.54%  runtime.lockWithRank (inline)
         0     0% 89.86%      1.11s  1.92%  runtime.mPark (inline)
         0     0% 89.86%      2.37s  4.09%  runtime.makechan
         0     0% 89.86%      8.58s 14.82%  runtime.mcall
         0     0% 89.86%      0.90s  1.55%  runtime.newarray
         0     0% 89.86%      1.11s  1.92%  runtime.notesleep
         0     0% 89.86%      0.46s  0.79%  runtime.notewakeup
         0     0% 89.86%      1.71s  2.95%  runtime.osyield (inline)
         0     0% 89.86%      6.80s 11.75%  runtime.park_m
         0     0% 89.86%      1.43s  2.47%  runtime.pollWork
         0     0% 89.86%      0.34s  0.59%  runtime.resetspinning
         0     0% 89.86%      1.36s  2.35%  runtime.semasleep
         0     0% 89.86%      0.55s  0.95%  runtime.semawakeup
         0     0% 89.86%      0.68s  1.17%  runtime.semrelease1
         0     0% 89.86%      0.46s  0.79%  runtime.startm
         0     0% 89.86%      1.12s  1.94%  runtime.stopm
         0     0% 89.86%      2.62s  4.53%  runtime.sysUsed (inline)
         0     0% 89.86%      2.62s  4.53%  runtime.sysUsedOS (inline)
         0     0% 89.86%        19s 32.83%  runtime.systemstack
         0     0% 89.86%      0.29s   0.5%  runtime.wbBufFlush
         0     0% 89.86%      0.29s   0.5%  runtime.wbBufFlush.func1
         0     0% 89.86%      0.62s  1.07%  sync.(*Mutex).Unlock
         0     0% 89.86%      3.27s  5.65%  syscall.Read (inline)
         0     0% 89.86%      7.62s 13.17%  syscall.Write (inline)
         0     0% 89.86%      3.27s  5.65%  syscall.read
         0     0% 89.86%      7.62s 13.17%  syscall.write
